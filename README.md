# IaC (Infrastructure as Code)
Ø¨Ù‡ Ù…ÙÙ‡ÙˆÙ…ÛŒ Ø§Ø´Ø§Ø±Ù‡ Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø²ÛŒØ±Ø³Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ØŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ØŒ Ø³Ø±ÙˆØ±Ù‡Ø§ Ùˆ Ø³Ø§ÛŒØ± Ù…Ù†Ø§Ø¨Ø¹ ÙÙ†Ø§ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø¯Ø± Ø§ÛŒÙ† Ø±ÙˆØ´ØŒ Ø¨Ù‡ Ø¬Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø³ØªÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÛŒØ§ Ù†ØµØ¨ Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§Ø¬Ø²Ø§ØŒ Ù‡Ù…Ù‡ Ø§ÛŒÙ† ÙØ±Ø¢ÛŒÙ†Ø¯Ù‡Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø¯Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ ÛŒØ§ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§ÛŒÙ† Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø¨Ù‡ Ú©Ø§Ù‡Ø´ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒØŒ Ø§ÙØ²Ø§ÛŒØ´ ØªÚ©Ø±Ø§Ø±Ù¾Ø°ÛŒØ±ÛŒ Ùˆ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¯Ø± Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ù‡Ù…Ú†Ù†ÛŒÙ† Ø§Ù…Ú©Ø§Ù† Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ú©Ø§Ù…Ù„ ÙØ±Ø¢ÛŒÙ†Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø²ÛŒØ±Ø³Ø§Ø®Øª Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

### ğŸ¤– Ù†ØµØ¨ Ansible
Ø¢Ù†Ø³ÛŒØ¨Ù„ ÛŒÚ©ÛŒ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø²ÛŒØ±Ø³Ø§Ø®Øª Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ú©Ø¯ Ø§Ø³Øª Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ Ùˆ Ø³Ø±ÙˆØ±Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø¨Ù‡â€ŒÙˆØ³ÛŒÙ„Ù‡â€ŒÛŒ Ø²Ø¨Ø§Ù† YAML (Ú©Ù‡ Ø¨Ù‡ Ø³Ø§Ø¯Ú¯ÛŒ Ù‚Ø§Ø¨Ù„ ÙÙ‡Ù… Ø§Ø³Øª) Ø¨Ø±Ø§ÛŒ ØªØ¹Ø±ÛŒÙ Ø¯Ø³ØªÙˆØ±Ø§Ù„Ø¹Ù…Ù„â€ŒÙ‡Ø§ Ùˆ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¨Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒØ±ÙˆØ¯ Ùˆ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø³Ø§Ø¯Ú¯ÛŒ Ø¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§ Ù…Ø­Ø¨ÙˆØ¨ Ø§Ø³Øª. Ø¢Ù†Ø³ÛŒØ¨Ù„ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†ØµØ¨ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø®Ø§Øµ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù‡Ø¯ÙØŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ SSH Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒ Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ø¢Ù† Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© ØªØ§ Ø¨Ø²Ø±Ú¯ Ù…Ù†Ø§Ø³Ø¨ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¹Ø·Ø§Ù Ú©Ù†Ø¯.  
Ø¬Ù‡Øª Ù†ØµØ¨ Ø¢Ù†Ø³ÛŒØ¨Ù„ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.

```bash
sudo apt update
sudo apt install software-properties-common
sudo add-apt-repository ppa:ansible/ansible
sudo apt update

sudo apt install ansible -y
sudo apt install ansible-lint -y

ansible --version
ansible-lint --version
```
---

### ğŸ³ Ù†ØµØ¨ Ø¯Ø§Ú©Ø±
Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ Docker Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ØŒ ÙØ§ÛŒÙ„ [install_docker.sh](./install_docker.sh) Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.

---

### ğŸš¦ Ù†ØµØ¨ Traefik
Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ Traefik Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø§Ø² Ø¯Ø³ØªÙˆØ± Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
```bash
cd traefik
sudo docker compose up -d

sudo docker network create traefik_reverse_proxy
```

---

### ğŸ“„ Ù†ØµØ¨ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù„Ø§Ú¯
âœ”ï¸ Elasticsearch (Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¬Ø³ØªØ¬Ùˆ Ù„Ø§Ú¯â€ŒÙ‡Ø§)   
âœ”ï¸ Kibana (Ù†Ù…Ø§ÛŒØ´ØŒ ÙÛŒÙ„ØªØ± Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ù„Ø§Ú¯â€ŒÙ‡Ø§)  
âœ”ï¸ Fluentd (Ø¬Ù…Ø¹ Ø¢Ù…ÙˆØ±ÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù„Ø§Ú¯ Ù‡Ø§)  
âŒ Logstash (ÙˆÙ‚ØªÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³Ù†Ú¯ÛŒÙ†â€ŒØªØ±ÛŒ Ù„Ø§Ø²Ù…Ù‡)  
âœ”ï¸ Beats  
â–«ï¸Filebeat (Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù†Ù†Ø¯ Apache/nginx logsØŒ PHP error logs, ...)  
â–«ï¸Metricbeat (Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ùˆ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ù…Ø§Ù†Ù†Ø¯ CPUØŒ RAMØŒ query load, ...)  
â–«ï¸Packetbeat (Ø¶Ø¨Ø· Ùˆ ØªØ­Ù„ÛŒÙ„ ØªØ±Ø§ÙÛŒÚ© Ù„Ø§ÛŒÙ‡ Ø´Ø¨Ú©Ù‡ Ùˆ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…Ø§Ù†Ù†Ø¯ HTTP, MySQL, DNS, ... )  
â–«ï¸Heartbeat (Ù¾ÛŒÙ†Ú¯ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ù„Ø§Ù…Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§)  
â–«ï¸Auditbeat (Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ø³ÛŒØ³ØªÙ…: ØªØºÛŒÛŒØ±Ø§Øª ÙØ§ÛŒÙ„ØŒ ÛŒÙˆØ²Ø±Ù‡Ø§ØŒ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§)  

Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù„Ø§Ú¯ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø§Ø² Ø¯Ø³ØªÙˆØ± Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
```bash
cd logs
sudo docker compose up -d
```

Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯ Ù‡Ø§ Ø¯Ø± 
```
http://kibana:5601/
```

---

### ğŸ¦Š Ø³Ø§Ø®Øª Token Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ GitLab
Ø¬Ù‡Øª Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Øª Ø¯Ø± Ú¯ÛŒØª Ù„Ø¨ Ø¨Ù‡ Ù…Ø³ÛŒØ± Ø²ÛŒØ± Ø¨Ø±ÙˆÛŒØ¯
```
GitLab >> Preferences >> Access tokens >> Add new token
```
Ùˆ ØªÙˆÚ©Ù† Ø¨Ø¯Ø³Øª Ø§Ù…Ø¯Ù‡ Ø±Ø§ Ø¯Ø± ÙØ§ÛŒÙ„ inventory_file.yml Ùˆ Ø¯Ø± Ù…ØªØºÛŒØ± gitlab_token Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯

---

### ğŸ› ï¸ Ù†ØµØ¨ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²
```bash
sudo apt update
sudo apt-get install cron
sudo apt install gzip
sudo apt install tar
sudo apt install curl
sudo apt install mysql-client
sudo apt install postgresql-client
```

---

### ğŸš€ Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ù„ÛŒ Ø¨ÙˆÚ© Ø¢Ù†Ø³ÛŒØ¨Ù„
```bash
sudo ansible-playbook -i inventory_file.yml playbook.yml
```
---

### ğŸ“š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ø¢Ù†Ø³ÛŒØ¨Ù„
Ø¨Ø±Ø§ÛŒ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨ÛŒØ´ØªØ± Ø¨Ø§ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ù†Ø³ÛŒØ¨Ù„ØŒ ÙØ§ÛŒÙ„ [Ansible Cheat Sheet](./ansible_cheat_sheet.md) Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ù†ÛŒØ¯.

